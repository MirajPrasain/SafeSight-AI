{"ast":null,"code":"var _jsxFileName = \"/Users/mirajprasai/Desktop/EmergeVision VS/frontend/src/pages/WebcamView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './WebcamView.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WebcamView = ({\n  onBack\n}) => {\n  _s();\n  const [isConnected, setIsConnected] = useState(false);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [detectedEvents, setDetectedEvents] = useState([]);\n  const [error, setError] = useState('');\n\n  // Check backend connection\n  useEffect(() => {\n    const checkConnection = async () => {\n      try {\n        const response = await axios.get('/health');\n        setIsConnected(true);\n        setError('');\n      } catch (err) {\n        setIsConnected(false);\n        setError('Backend server is not running. Please start the backend server.');\n      }\n    };\n    checkConnection();\n    const interval = setInterval(checkConnection, 5000); // Check every 5 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n  const startStream = async () => {\n    try {\n      setError('');\n      const response = await axios.post('/start_stream');\n      setVideoUrl(response.data.video_url);\n      setIsStreaming(true);\n    } catch (err) {\n      setError('Failed to start video stream: ' + err.message);\n    }\n  };\n  const stopStream = async () => {\n    try {\n      await axios.post('/stop_stream');\n      setIsStreaming(false);\n      setVideoUrl('');\n      setDetectedEvents([]);\n    } catch (err) {\n      setError('Failed to stop video stream: ' + err.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"webcam-view\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"webcam-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onBack,\n        className: \"back-link\",\n        children: \"\\u2190 Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDCF9 Live Webcam Monitoring\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Real-time emergency detection through live video streams\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"connection-status\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `status-indicator ${isConnected ? 'status-online' : 'status-offline'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), isConnected ? 'Backend Connected' : 'Backend Disconnected']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"webcam-main\",\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stream-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button primary\",\n          onClick: startStream,\n          disabled: !isConnected || isStreaming,\n          children: \"Start Live Stream\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button secondary\",\n          onClick: stopStream,\n          disabled: !isStreaming,\n          children: \"Stop Stream\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), isStreaming && videoUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-container\",\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          src: videoUrl,\n          autoPlay: true,\n          muted: true,\n          controls: true,\n          width: \"100%\",\n          height: \"auto\",\n          className: \"stream-video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), detectedEvents.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detection-results\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Live Detection Results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), detectedEvents.map((event, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"event-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: event.type\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 17\n          }, this), event.confidence && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"confidence\",\n            children: [\"(Confidence: \", (event.confidence * 100).toFixed(1), \"%)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 19\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(WebcamView, \"O/Z+q+93WBMMK3JLcdRyUZZWBjo=\");\n_c = WebcamView;\nexport default WebcamView;\nvar _c;\n$RefreshReg$(_c, \"WebcamView\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","WebcamView","onBack","_s","isConnected","setIsConnected","videoUrl","setVideoUrl","isStreaming","setIsStreaming","detectedEvents","setDetectedEvents","error","setError","checkConnection","response","get","err","interval","setInterval","clearInterval","startStream","post","data","video_url","message","stopStream","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","disabled","src","autoPlay","muted","controls","width","height","length","map","event","index","type","confidence","toFixed","_c","$RefreshReg$"],"sources":["/Users/mirajprasai/Desktop/EmergeVision VS/frontend/src/pages/WebcamView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './WebcamView.css';\n\nconst WebcamView = ({ onBack }) => {\n  const [isConnected, setIsConnected] = useState(false);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [detectedEvents, setDetectedEvents] = useState([]);\n  const [error, setError] = useState('');\n\n  // Check backend connection\n  useEffect(() => {\n    const checkConnection = async () => {\n      try {\n        const response = await axios.get('/health');\n        setIsConnected(true);\n        setError('');\n      } catch (err) {\n        setIsConnected(false);\n        setError('Backend server is not running. Please start the backend server.');\n      }\n    };\n\n    checkConnection();\n    const interval = setInterval(checkConnection, 5000); // Check every 5 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const startStream = async () => {\n    try {\n      setError('');\n      const response = await axios.post('/start_stream');\n      setVideoUrl(response.data.video_url);\n      setIsStreaming(true);\n    } catch (err) {\n      setError('Failed to start video stream: ' + err.message);\n    }\n  };\n\n  const stopStream = async () => {\n    try {\n      await axios.post('/stop_stream');\n      setIsStreaming(false);\n      setVideoUrl('');\n      setDetectedEvents([]);\n    } catch (err) {\n      setError('Failed to stop video stream: ' + err.message);\n    }\n  };\n\n  return (\n    <div className=\"webcam-view\">\n      <header className=\"webcam-header\">\n        <button onClick={onBack} className=\"back-link\">‚Üê Back</button>\n        <h1>üìπ Live Webcam Monitoring</h1>\n        <p>Real-time emergency detection through live video streams</p>\n        \n        <div className=\"connection-status\">\n          <span className={`status-indicator ${isConnected ? 'status-online' : 'status-offline'}`}></span>\n          {isConnected ? 'Backend Connected' : 'Backend Disconnected'}\n        </div>\n      </header>\n\n      <main className=\"webcam-main\">\n        {error && (\n          <div className=\"alert alert-danger\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"stream-controls\">\n          <button \n            className=\"button primary\" \n            onClick={startStream} \n            disabled={!isConnected || isStreaming}\n          >\n            Start Live Stream\n          </button>\n          <button \n            className=\"button secondary\" \n            onClick={stopStream} \n            disabled={!isStreaming}\n          >\n            Stop Stream\n          </button>\n        </div>\n\n        {isStreaming && videoUrl && (\n          <div className=\"video-container\">\n            <video \n              src={videoUrl} \n              autoPlay \n              muted \n              controls\n              width=\"100%\"\n              height=\"auto\"\n              className=\"stream-video\"\n            />\n          </div>\n        )}\n\n        {detectedEvents.length > 0 && (\n          <div className=\"detection-results\">\n            <h3>Live Detection Results</h3>\n            {detectedEvents.map((event, index) => (\n              <div key={index} className=\"event-item\">\n                <strong>{event.type}</strong>\n                {event.confidence && (\n                  <span className=\"confidence\">\n                    (Confidence: {(event.confidence * 100).toFixed(1)}%)\n                  </span>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nexport default WebcamView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}